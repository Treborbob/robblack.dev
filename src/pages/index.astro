---
import { portfolio } from '../data/portfolio';
import Layout from '../layouts/Layout.astro';

// Display limits
const MAX_EXPERIENCE_DISPLAYED = 4;
const MAX_HIGHLIGHTS_DISPLAYED = 2;
const MAX_SKILLS_DISPLAYED = 3;
---

<Layout title={`${portfolio.name} - Portfolio`}>
    <!-- Bento Grid Layout -->
    <div class="bento-grid">
        <!-- Hero Section - Large Card -->
        <div class="bento-card col-span-2 bg-gradient-to-br from-violet-600 to-indigo-600">
            <div class="flex flex-col justify-center">
                <h1 class="text-5xl font-bold mb-4 text-white">Hi, I'm Rob ðŸ‘‹</h1>
                <p class="text-xl text-violet-100 mb-6">{portfolio.title}</p>
                <div class="text-violet-50 leading-relaxed">
                    {portfolio.summary.split('\n\n')[0]}
                </div>
            </div>
        </div>

        <!-- Quick Stats / Contact -->
        <div class="bento-card bg-slate-900 border border-slate-800">
            <h3 class="text-lg font-semibold mb-4 text-violet-400">Get in Touch</h3>
            <div class="space-y-3">
                {portfolio.email && (
                    <a href={`mailto:${portfolio.email}`} class="flex items-center gap-2 text-slate-300 hover:text-violet-400 no-underline transition-colors" aria-label={`Email me at ${portfolio.email}`}>
                        <span aria-hidden="true">ðŸ“§</span>
                        <span class="text-sm">Email</span>
                    </a>
                )}
                {portfolio.github && (
                    <a href={portfolio.github} class="flex items-center gap-2 text-slate-300 hover:text-violet-400 no-underline transition-colors" target="_blank" rel="noopener noreferrer" aria-label="Visit my GitHub profile">
                        <span aria-hidden="true">ðŸ’»</span>
                        <span class="text-sm">GitHub</span>
                    </a>
                )}
                {portfolio.linkedin && (
                    <a href={portfolio.linkedin} class="flex items-center gap-2 text-slate-300 hover:text-violet-400 no-underline transition-colors" target="_blank" rel="noopener noreferrer" aria-label="Visit my LinkedIn profile">
                        <span aria-hidden="true">ðŸ’¼</span>
                        <span class="text-sm">LinkedIn</span>
                    </a>
                )}
            </div>
        </div>

        <!-- Current Role Highlight -->
        {portfolio.experience && portfolio.experience.length > 0 && (
            <div class="bento-card bg-slate-900 border border-slate-800">
                <div class="flex items-start justify-between mb-3">
                    <span class="text-xs font-semibold text-violet-400 uppercase tracking-wide">Current Role</span>
                    <span class="text-xs text-slate-500">{portfolio.experience[0].period.split('â€“')[0].trim()} â€“ Present</span>
                </div>
                <h3 class="text-xl font-bold text-slate-100 mb-2">{portfolio.experience[0].role}</h3>
                <p class="text-sm text-slate-400 mb-3">{portfolio.experience[0].company}</p>
                <p class="text-sm text-slate-300 leading-relaxed">{portfolio.experience[0].description}</p>
            </div>
        )}

        <!-- Skills Grid -->
        <div class="bento-card col-span-4 bg-slate-900 border border-slate-800">
            <h2 class="text-2xl font-bold mb-6 text-slate-100">Core Competencies</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                {portfolio.competencies.map((comp) => (
                    <div class="space-y-3 pb-4 border-b border-slate-800 last:border-b-0 lg:border-b-0">
                        <div class="flex items-center gap-2">
                            <span class="text-lg" aria-hidden="true">âœ¦</span>
                            <h3 class="text-sm font-semibold text-violet-400">{comp.category}</h3>
                        </div>
                        <div class="flex flex-wrap gap-1.5">
                            {comp.skills.slice(0, MAX_SKILLS_DISPLAYED).map((skill) => (
                                <span class="text-xs px-2 py-1 bg-slate-800 text-slate-300 rounded hover:bg-slate-700 transition-colors">
                                    {skill}
                                </span>
                            ))}
                        </div>
                    </div>
                ))}
            </div>
        </div>

        <!-- Experience Timeline -->
        <div class="bento-card col-span-2 bg-slate-900 border border-slate-800">
            <h2 class="text-2xl font-bold mb-6 text-slate-100">Experience</h2>
            <div class="space-y-6">
                {portfolio.experience.slice(0, MAX_EXPERIENCE_DISPLAYED).map((exp) => (
                    <div class="border-l-2 border-violet-600 pl-4">
                        <div class="flex justify-between items-baseline mb-1 flex-wrap gap-2">
                            <h3 class="text-lg font-semibold text-slate-100">{exp.company}</h3>
                            <span class="text-xs text-slate-500">{exp.period}</span>
                        </div>
                        <p class="text-sm text-violet-400 mb-2">{exp.role}</p>
                        {exp.highlights && exp.highlights.length > 0 && (
                            <ul class="text-sm text-slate-400 space-y-1" role="list">
                                {exp.highlights.slice(0, MAX_HIGHLIGHTS_DISPLAYED).map((highlight) => (
                                    <li class="flex gap-2">
                                        <span class="text-violet-500 shrink-0">â†’</span>
                                        <span>{highlight}</span>
                                    </li>
                                ))}
                            </ul>
                        )}
                    </div>
                ))}
            </div>
        </div>

        <!-- Projects Placeholder -->
        <div class="bento-card col-span-2 bg-gradient-to-br from-slate-900 to-slate-800 border border-slate-700">
            <div class="py-8">
                <h2 class="text-2xl font-bold mb-6 text-slate-100">Selected Projects</h2>
                <div class="flex items-center gap-4 mb-4">
                    <div class="text-4xl" aria-hidden="true">ðŸš€</div>
                    <div class="flex-1">
                        <p class="text-slate-300 mb-3">Exciting projects in development</p>
                        <div class="w-full bg-slate-800 rounded-full h-2 overflow-hidden">
                            <div class="bg-gradient-to-r from-violet-600 to-indigo-600 h-full rounded-full animate-pulse" style="width: 60%"></div>
                        </div>
                    </div>
                </div>
                <p class="text-sm text-slate-500 italic">Stay tuned for updates...</p>
            </div>
        </div>
    </div>
</Layout>

<style>
    .bento-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1.5rem;
        width: 100%;
    }

    .bento-card {
        padding: 2rem;
        border-radius: 1.5rem;
        transition: transform 0.2s, box-shadow 0.2s;
        min-height: 200px;
    }

    /* Only apply hover effect to cards with interactive content */
    .bento-card:has(a):hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 40px rgba(139, 92, 246, 0.15);
    }

    .col-span-2 {
        grid-column: span 2;
    }

    .col-span-4 {
        grid-column: span 4;
    }

    .row-span-2 {
        grid-row: span 2;
    }

    @media (max-width: 1024px) {
        .bento-grid {
            grid-template-columns: repeat(2, 1fr);
        }

        .col-span-2, .col-span-4 {
            grid-column: span 2;
        }
    }

    @media (max-width: 640px) {
        .bento-grid {
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        .bento-card {
            padding: 1.5rem;
            min-height: 150px;
        }

        .col-span-2 {
            grid-column: span 1;
        }

        .row-span-2 {
            grid-row: span 1;
        }
    }
</style>
